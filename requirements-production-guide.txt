# ğŸš€ HÆ¯á»šNG DáºªN CÃ€I Äáº¶T CHI TIáº¾T - DRIVER FATIGUE DETECTION SYSTEM
# Production Dependencies - DÃ nh cho ngÆ°á»i dÃ¹ng cuá»‘i

## ğŸ“‹ YÃŠU Cáº¦U Há»† THá»NG
- Python 3.8 â†’ 3.11 (Báº®T BUá»˜C - mediapipe chá»‰ há»— trá»£ cÃ¡c version nÃ y)
- RAM: Tá»‘i thiá»ƒu 4GB, khuyáº¿n nghá»‹ 8GB+  
- Camera: Webcam hoáº·c camera USB
- OS: Windows 10/11, macOS 10.13+, Ubuntu 18.04+

## ğŸ”§ BÆ¯á»šC 1: KIá»‚M TRA VÃ€ CÃ€I Äáº¶T PYTHON

### Kiá»ƒm tra Python version hiá»‡n táº¡i:
```bash
python --version
# Hoáº·c trÃªn Windows:
py --version
```

### âŒ Náº¿u khÃ´ng cÃ³ Python hoáº·c sai version:

#### ğŸ“¥ Táº£i Python 3.11 (Khuyáº¿n nghá»‹):
- **Link táº£i**: https://www.python.org/downloads/release/python-3118/
- **Chá»n**: Windows installer (64-bit) - file tÃªn `python-3.11.8-amd64.exe`

#### âš™ï¸ CÃ i Ä‘áº·t Python:
1. Cháº¡y file installer vá»«a táº£i
2. âœ… **QUAN TRá»ŒNG**: Tick vÃ o "Add Python 3.11 to PATH"
3. Chá»n "Install Now" hoáº·c "Customize installation" (náº¿u muá»‘n tÃ¹y chá»‰nh)
4. Chá» cÃ i Ä‘áº·t hoÃ n táº¥t

#### âœ… Kiá»ƒm tra sau khi cÃ i:
```bash
py -3.11 --version
# Káº¿t quáº£ mong muá»‘n: Python 3.11.8
```

## ğŸ  BÆ¯á»šC 2: Táº O MÃ”I TRÆ¯á»œNG áº¢O (VIRTUAL ENVIRONMENT)

### Táº¡i sao cáº§n mÃ´i trÆ°á»ng áº£o?
- TrÃ¡nh xung Ä‘á»™t package vá»›i cÃ¡c project khÃ¡c
- Dá»… dÃ ng quáº£n lÃ½ dependencies
- CÃ³ thá»ƒ xÃ³a/táº¡o láº¡i mÃ´i trÆ°á»ng mÃ  khÃ´ng áº£nh hÆ°á»Ÿng há»‡ thá»‘ng

### Táº¡o mÃ´i trÆ°á»ng áº£o:
```bash
# Táº¡o mÃ´i trÆ°á»ng áº£o tÃªn ".venv"
py -3.11 -m venv .venv

# Hoáº·c náº¿u chá»‰ cÃ³ 1 Python version:
python -m venv .venv
```

### KÃ­ch hoáº¡t mÃ´i trÆ°á»ng áº£o:

#### Windows (CMD/PowerShell):
```bash
.venv\Scripts\activate
```

#### Windows (Git Bash):
```bash
source .venv/Scripts/activate
```

#### macOS/Linux:
```bash
source .venv/bin/activate
```

### âœ… Kiá»ƒm tra kÃ­ch hoáº¡t thÃ nh cÃ´ng:
DÃ²ng lá»‡nh sáº½ thay Ä‘á»•i thÃ nh: `(.venv) C:\your\path>`

### ğŸ›‘ Táº¯t mÃ´i trÆ°á»ng áº£o (khi cáº§n):
```bash
deactivate
```

## ğŸ”„ BÆ¯á»šC 3: CÃ€I Äáº¶T DEPENDENCIES

### Äáº£m báº£o mÃ´i trÆ°á»ng áº£o Ä‘Ã£ Ä‘Æ°á»£c kÃ­ch hoáº¡t (cÃ³ (.venv) á»Ÿ Ä‘áº§u dÃ²ng lá»‡nh)

### CÃ i Ä‘áº·t táº¥t cáº£ dependencies:
```bash
pip install -r requirements.txt
```

### Hoáº·c cÃ i Ä‘áº·t tá»«ng package má»™t cÃ¡ch chi tiáº¿t:

#### 1. OpenCV - Xá»­ lÃ½ áº£nh & video (Package chÃ­nh):
```bash
pip install opencv-python>=4.8.0
```
**Má»¥c Ä‘Ã­ch**: Capture video tá»« camera, xá»­ lÃ½ frame, resize, convert color space

#### 2. MediaPipe - AI Face Detection (Core AI):
```bash
pip install mediapipe==0.10.14
```
**Má»¥c Ä‘Ã­ch**: PhÃ¡t hiá»‡n 468 landmarks trÃªn khuÃ´n máº·t, tÃ­nh toÃ¡n EAR, MAR cho drowsiness detection

#### 3. NumPy - TÃ­nh toÃ¡n ma tráº­n (Foundation):
```bash
pip install "numpy>=1.21.0,<2.0.0"
```
**Má»¥c Ä‘Ã­ch**: Xá»­ lÃ½ arrays, tÃ­nh khoáº£ng cÃ¡ch Euclid, cÃ¡c phÃ©p toÃ¡n vector cho landmarks

#### 4. Imutils - OpenCV utilities (Helper):
```bash
pip install imutils>=0.5.4
```
**Má»¥c Ä‘Ã­ch**: Resize, rotate, convert áº£nh dá»… dÃ ng hÆ¡n so vá»›i OpenCV thuáº§n

#### 5. Pillow - Image processing (Support):
```bash
pip install Pillow>=9.0.0
```
**Má»¥c Ä‘Ã­ch**: Xá»­ lÃ½ áº£nh, táº¡o thumbnail, convert format, load/save images

#### 6. Pygame - Audio system (Alert):
```bash
pip install pygame>=2.1.0
```
**Má»¥c Ä‘Ã­ch**: PhÃ¡t Ã¢m thanh cáº£nh bÃ¡o khi phÃ¡t hiá»‡n drowsiness, quáº£n lÃ½ audio files

#### 7. Pynput - System input (Control):
```bash
pip install pynput>=1.7.6
```
**Má»¥c Ä‘Ã­ch**: Capture keyboard/mouse input, Ä‘iá»u khiá»ƒn há»‡ thá»‘ng, hotkeys

## ğŸ“± BÆ¯á»šC 4: Cáº¤U HÃŒNH VS CODE (Khuyáº¿n nghá»‹)

### Tá»± Ä‘á»™ng chá»n Python interpreter:
1. Má»Ÿ project trong VS Code
2. Nháº¥n `Ctrl + Shift + P`
3. GÃµ: "Python: Select Interpreter"
4. Chá»n: `.venv\Scripts\python.exe` (Windows) hoáº·c `.venv/bin/python` (macOS/Linux)

### CÃ i Ä‘áº·t VS Code extensions há»¯u Ã­ch:
- Python (Microsoft)
- Python Debugger
- autoDocstring
- Python Indent

## ğŸ® BÆ¯á»šC 5: CHáº Y á»¨NG Dá»¤NG

### Tá»« source code:
```bash
# Äáº£m báº£o mÃ´i trÆ°á»ng áº£o Ä‘Ã£ kÃ­ch hoáº¡t
(.venv) python src/main.py
```

### Kiá»ƒm tra camera:
- á»¨ng dá»¥ng sáº½ tá»± Ä‘á»™ng detect camera (thÆ°á»ng camera 0)
- Náº¿u khÃ´ng cÃ³ camera, sáº½ hiá»‡n thÃ´ng bÃ¡o lá»—i
- Cho phÃ©p camera access khi browser/OS há»i

## â— KHáº®C PHá»¤C Sá»° Cá» THÆ¯á»œNG Gáº¶P

### ğŸ”´ Lá»—i MediaPipe khÃ´ng cÃ i Ä‘Æ°á»£c:
```
ERROR: Could not find a version that satisfies the requirement mediapipe
```
**NguyÃªn nhÃ¢n**: Python version khÃ´ng há»— trá»£ (< 3.8 hoáº·c >= 3.12)
**Giáº£i phÃ¡p**: CÃ i láº¡i Python 3.11 theo hÆ°á»›ng dáº«n á»Ÿ BÆ°á»›c 1

### ğŸ”´ Lá»—i OpenCV khÃ´ng import Ä‘Æ°á»£c:
```
ImportError: No module named cv2
```
**Giáº£i phÃ¡p**:
```bash
pip uninstall opencv-python
pip install opencv-python>=4.8.0
```

### ğŸ”´ Lá»—i Permission (Windows):
```
ERROR: Microsoft Visual C++ 14.0 is required
```
**Giáº£i phÃ¡p**: 
- Táº£i Visual Studio Build Tools: https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2022
- Hoáº·c cÃ i Visual Studio Community

### ğŸ”´ Lá»—i Camera khÃ´ng detect:
```
Camera not found or access denied
```
**Giáº£i phÃ¡p**:
1. Kiá»ƒm tra camera Ä‘Ã£ káº¿t ná»‘i
2. Táº¯t cÃ¡c á»©ng dá»¥ng khÃ¡c Ä‘ang dÃ¹ng camera
3. Cáº¥p quyá»n camera cho Python/Terminal
4. Thá»­ Ä‘á»•i camera index (0, 1, 2...)

### ğŸ”´ Lá»—i Audio khÃ´ng phÃ¡t Ä‘Æ°á»£c:
```
pygame.error: No audio device found
```
**Giáº£i phÃ¡p**:
- Kiá»ƒm tra audio drivers
- Khá»Ÿi Ä‘á»™ng láº¡i mÃ¡y
- CÃ i láº¡i pygame: `pip install --force-reinstall pygame`

## ğŸ“Š KIá»‚M TRA CÃ€I Äáº¶T THÃ€NH CÃ”NG

### Test tá»«ng component:
```python
# Test OpenCV
import cv2
print("OpenCV version:", cv2.__version__)

# Test MediaPipe  
import mediapipe as mp
print("MediaPipe available")

# Test NumPy
import numpy as np
print("NumPy version:", np.__version__)

# Test Pygame
import pygame
pygame.mixer.init()
print("Pygame audio initialized")
```

### Cháº¡y test script nhanh:
```python
import cv2
import mediapipe as mp

# Test camera
cap = cv2.VideoCapture(0)
if cap.isOpened():
    print("âœ… Camera detected successfully!")
    cap.release()
else:
    print("âŒ Camera not found!")

# Test MediaPipe
mp_face_mesh = mp.solutions.face_mesh
with mp_face_mesh.FaceMesh() as face_mesh:
    print("âœ… MediaPipe face mesh initialized!")
```

## ğŸ“ GHI CHÃš QUAN TRá»ŒNG

### ğŸ”’ Báº£o máº­t:
- á»¨ng dá»¥ng chá»‰ xá»­ lÃ½ local, khÃ´ng upload áº£nh lÃªn internet
- Dá»¯ liá»‡u camera chá»‰ Ä‘Æ°á»£c xá»­ lÃ½ real-time, khÃ´ng lÆ°u trá»¯

### âš¡ Hiá»‡u nÄƒng:
- Khuyáº¿n nghá»‹ RAM >= 8GB cho smooth operation
- CPU: Intel i5/AMD Ryzen 5 hoáº·c tÆ°Æ¡ng Ä‘Æ°Æ¡ng trá»Ÿ lÃªn
- GPU khÃ´ng báº¯t buá»™c nhÆ°ng sáº½ giÃºp xá»­ lÃ½ nhanh hÆ¡n

### ğŸ”„ Cáº­p nháº­t:
```bash
# Cáº­p nháº­t táº¥t cáº£ packages
pip install --upgrade -r requirements.txt

# Cáº­p nháº­t tá»«ng package
pip install --upgrade opencv-python mediapipe numpy
```

---
ğŸ“… **Cáº­p nháº­t**: November 29, 2025  
ğŸ **Python há»— trá»£**: 3.8, 3.9, 3.10, 3.11  
ğŸ’» **OS há»— trá»£**: Windows 10/11, macOS 10.13+, Ubuntu 18.04+
